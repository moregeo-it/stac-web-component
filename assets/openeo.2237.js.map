{"version":3,"file":"openeo.2237.js","mappings":"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","sources":["webpack://vue-lib-openeo/./components/internal/MapMixin.js","webpack://vue-lib-openeo/./components/internal/StacLinksMixin.js"],"sourcesContent":["import Utils from '../../utils';\nimport { Versions } from '@openeo/js-commons';\n\nexport default {\n\tprops: {\n\t\tmapOptions: {\n\t\t\t// It's not possible to specify defaults for the individual properties, therefore this prop is only accessed through a computed property which adds them in.\n\t\t\ttype: Object,\n\t\t\t// Default values will be set in computed.leafletOptions\n\t\t\tdefault: () => ({}),\n\t\t\tvalidator: function(value) {\n\t\t\t\tconst allowedTypes = {  // keep in sync with Readme\n\t\t\t\t\theight: \"string\",\n\t\t\t\t\twidth: \"string\",\n\t\t\t\t\tbasemap: \"string\",\n\t\t\t\t\tattribution: \"string\",\n\t\t\t\t\twrapAroundAntimeridian: \"boolean\",\n\t\t\t\t\tscrollWheelZoom: \"boolean\"\n\t\t\t\t};\n\t\t\t\tconst allowedKeys = Object.keys(allowedTypes);\n\t\t\t\treturn typeof value == 'object' && Object.keys(value).every(key =>\n\t\t\t\t\tallowedKeys.indexOf(key) != -1 && typeof value[key] == allowedTypes[key]\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tmap: null\n\t\t};\n\t},\n\tcomputed: {\n\t\tleafletOptions() {\n\t\t\treturn {  // keep in sync with Readme\n\t\t\t\theight: this.mapOptions.height || '250px',\n\t\t\t\twidth: this.mapOptions.width || 'auto',\n\t\t\t\tbasemap: this.mapOptions.basemap || 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n\t\t\t\tattribution: this.mapOptions.attribution || 'Map data &copy; <a href=\"http://www.osm.org\">OpenStreetMap</a>',\n\t\t\t\tnoWrap: this.mapOptions.wrapAroundAntimeridian === undefined ? true : !this.mapOptions.wrapAroundAntimeridian,  // negate!\n\t\t\t\tscrollWheelZoom: this.mapOptions.scrollWheelZoom === undefined ? false : this.mapOptions.scrollWheelZoom\n\t\t\t}\n\t\t}\n\t},\n\twatch: {\n\t\tshowMap(val) {\n\t\t\tif (val) {\n\t\t\t\tthis.initMap();\n\t\t\t}\n\t\t}\n\t},\n\tbeforeCreate() {\n\t\tUtils.enableHtmlProps(this);\n\t},\n\tmounted() {\n\t\tthis.initMap();\n\t},\n\tmethods: {\n\t\tinitLeafletPlugins() {\n\t\t\t// To be implemented in Collection/Item, if required.\n\t\t},\n\t\tasync initMap() {\n\t\t\tif (!this.$refs.mapContainer) {\n\t\t\t\tawait this.$nextTick();\n\t\t\t}\n\t\t\tif (!this.$refs.mapContainer || this.map !== null || !this.showMap) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// Only use the L for leaflet temporarily and release it later again\n\t\t\tlet oldL = window.L;\n\t\t\ttry {\n\t\t\t\tthis.map = {\n\t\t\t\t\tleaflet: null,\n\t\t\t\t\tinstance: null,\n\t\t\t\t\tgeometries: null\n\t\t\t\t};\n\t\t\t\t// Leaflet no conflict fix: Try to re-use an already available instance of Leaflet to avoid\n\t\t\t\t// conflicts with other libraries such as ipyleaflet. Also, use L variable as long as initMap\n\t\t\t\t// is running. For all other cases store Leaflet in this.map.leaflet, which can be used in other places.\n\t\t\t\tlet hasLeaflet = () => Utils.isObject(window.L) && Versions.validate(window.L.version) && Versions.compare(window.L.version, \"1.x.x\", \"=\");\n\t\t\t\tif (!hasLeaflet()) {\n\t\t\t\t\twindow.L = await import('leaflet');\n\t\t\t\t}\n\t\t\t\tif (!hasLeaflet()) {\n\t\t\t\t\tconsole.warn(\"Leaflet is not available\");\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tthis.map.leaflet = window.L;\n\n\t\t\t\tlet css = await import('leaflet/dist/leaflet.css');\n\t\t\t\t// In Web Component mode inject the CSS into the shadowroot\n\t\t\t\tif (this.$root && this.$root.$options.shadowRoot && css.__inject__) {\n\t\t\t\t\tcss.__inject__(this.$root.$options.shadowRoot);\n\t\t\t\t}\n\n\t\t\t\tvar map = this.map.leaflet.map(this.$refs.mapContainer, {scrollWheelZoom: this.leafletOptions.scrollWheelZoom});\n\t\t\t\tthis.map.instance = map;\n\t\t\t\tvar osm = this.map.leaflet.tileLayer(this.leafletOptions.basemap, {\n\t\t\t\t\tname: 'Basemap',\n\t\t\t\t\tattribution: this.leafletOptions.attribution,\n\t\t\t\t\tnoWrap: this.leafletOptions.noWrap\n\t\t\t\t});\n\t\t\t\tosm.addTo(map);\n\n\t\t\t\tif (typeof this.addFeatures === 'function') {\n\t\t\t\t\tthis.map.geometries = this.addFeatures();\n\t\t\t\t\tif (this.map.geometries) {\n\t\t\t\t\t\tthis.map.geometries.addTo(map);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Update map container in DOM\n\t\t\t\tthis.$refs.mapContainer.style.width = this.leafletOptions.width;\n\t\t\t\tthis.$refs.mapContainer.style.height = this.leafletOptions.height;\n\t\t\t\tmap.invalidateSize(false);\n\t\t\t\tthis.updateMapView();\n\n\t\t\t\tif (typeof this.mapOptions.onAfterMapInit === 'function') {\n\t\t\t\t\tthis.mapOptions.onAfterMapInit(map, this.map.geometries);\n\t\t\t\t}\n\t\t\t\t// Leaflet no conflict fix: Release L global variable again\n\t\t\t\twindow.L = oldL;\n\t\t\t\treturn true;\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t\t// Leaflet no conflict fix: Release L global variable again\n\t\t\t\twindow.L = oldL;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tupdateMapView() {\n\t\t\tif (!this.map || !this.map.geometries) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Compute somewhat smart map extent and zoom level around bbox\n\t\t\tvar bounds = this.map.geometries.getBounds();\n\t\t\tvar zoom = this.map.instance.getBoundsZoom(bounds);\n\t\t\tvar newZoom = Math.min(zoom, 11); // Never zoom closer than 8\n\t\t\tif (zoom > 8) {\n\t\t\t\tnewZoom = newZoom - 3; // Zoom out three levels\n\t\t\t}\n\t\t\telse if (zoom > 5) {\n\t\t\t\tnewZoom = newZoom - 2; // Zoom out two levels\n\t\t\t}\n\t\t\telse if (zoom > 2) {\n\t\t\t\tnewZoom--; // Zoom out one level\n\t\t\t}\n\t\t\tthis.map.instance.fitBounds(bounds);\n\t\t\tthis.map.instance.setZoom(newZoom);\n\n\t\t\tthis.map.instance.once('moveend zoomend', () => this.map.instance.invalidateSize(false));\n\t\t}\n\t}\n};","const STAC_MEDIA_TYPES = ['application/geo+json', 'application/json'];\n\nexport default {\n\tmethods: {\n\t\tisStacLinkType(link, strict = false) {\n\t\t\tif (typeof link.type === 'undefined') {\n\t\t\t\treturn !strict;\n\t\t\t}\n\t\t\treturn typeof link.type === 'string' && STAC_MEDIA_TYPES.includes(link.type.toLowerCase());\n\t\t},\n\t\tgetStacLinkByRel(links, rel, strict = false) {\n\t\t\tif (!Array.isArray(links)) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\treturn links.find(link => (this.isStacLinkType(link, strict) && typeof link.rel === 'string' && link.rel.toLowerCase() === rel.toLowerCase()));\n\t\t},\n\t\tgetStacLinksByRels(links, rels, strict = false) {\n\t\t\tif (!Array.isArray(links)) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\treturn links.filter(link => (this.isStacLinkType(link, strict) && typeof link.rel === 'string' && rels.includes(link.rel.toLowerCase())));\n\t\t}\n\t}\n};"],"names":["Utils","Versions","props","mapOptions","type","Object","default","validator","value","allowedTypes","height","width","basemap","attribution","wrapAroundAntimeridian","scrollWheelZoom","allowedKeys","keys","every","key","indexOf","data","map","computed","leafletOptions","noWrap","undefined","watch","showMap","val","initMap","beforeCreate","enableHtmlProps","mounted","methods","initLeafletPlugins","$refs","mapContainer","$nextTick","oldL","window","L","leaflet","instance","geometries","hasLeaflet","isObject","validate","version","compare","console","warn","css","$root","$options","shadowRoot","__inject__","osm","tileLayer","name","addTo","addFeatures","style","invalidateSize","updateMapView","onAfterMapInit","e","error","bounds","getBounds","zoom","getBoundsZoom","newZoom","Math","min","fitBounds","setZoom","once","STAC_MEDIA_TYPES","isStacLinkType","link","strict","includes","toLowerCase","getStacLinkByRel","links","rel","Array","isArray","find","getStacLinksByRels","rels","filter"],"ignoreList":[],"sourceRoot":""}