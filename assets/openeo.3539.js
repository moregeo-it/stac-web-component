(self["webpackChunkvue_lib_openeo"] = self["webpackChunkvue_lib_openeo"] || []).push([[3539],{

/***/ 1247
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_vue_style_loader_index_js_clonedRuleSet_22_use_0_node_modules_css_loader_dist_cjs_js_clonedRuleSet_22_use_1_node_modules_vue_vue_loader_v15_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_22_use_2_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_22_use_3_node_modules_sass_loader_dist_cjs_js_clonedRuleSet_22_use_4_node_modules_vue_vue_loader_v15_lib_index_js_vue_loader_options_Block_vue_vue_type_style_index_0_id_738e9c36_prod_lang_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5491);
/* harmony import */ var _node_modules_vue_style_loader_index_js_clonedRuleSet_22_use_0_node_modules_css_loader_dist_cjs_js_clonedRuleSet_22_use_1_node_modules_vue_vue_loader_v15_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_22_use_2_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_22_use_3_node_modules_sass_loader_dist_cjs_js_clonedRuleSet_22_use_4_node_modules_vue_vue_loader_v15_lib_index_js_vue_loader_options_Block_vue_vue_type_style_index_0_id_738e9c36_prod_lang_scss__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_vue_style_loader_index_js_clonedRuleSet_22_use_0_node_modules_css_loader_dist_cjs_js_clonedRuleSet_22_use_1_node_modules_vue_vue_loader_v15_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_22_use_2_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_22_use_3_node_modules_sass_loader_dist_cjs_js_clonedRuleSet_22_use_4_node_modules_vue_vue_loader_v15_lib_index_js_vue_loader_options_Block_vue_vue_type_style_index_0_id_738e9c36_prod_lang_scss__WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};
/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _node_modules_vue_style_loader_index_js_clonedRuleSet_22_use_0_node_modules_css_loader_dist_cjs_js_clonedRuleSet_22_use_1_node_modules_vue_vue_loader_v15_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_22_use_2_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_22_use_3_node_modules_sass_loader_dist_cjs_js_clonedRuleSet_22_use_4_node_modules_vue_vue_loader_v15_lib_index_js_vue_loader_options_Block_vue_vue_type_style_index_0_id_738e9c36_prod_lang_scss__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== "default") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _node_modules_vue_style_loader_index_js_clonedRuleSet_22_use_0_node_modules_css_loader_dist_cjs_js_clonedRuleSet_22_use_1_node_modules_vue_vue_loader_v15_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_22_use_2_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_22_use_3_node_modules_sass_loader_dist_cjs_js_clonedRuleSet_22_use_4_node_modules_vue_vue_loader_v15_lib_index_js_vue_loader_options_Block_vue_vue_type_style_index_0_id_738e9c36_prod_lang_scss__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]
/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);


/***/ },

/***/ 1443
(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1601);
/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6314);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));
// Module
___CSS_LOADER_EXPORT___.push([module.id, `.vue-component.model-builder .block .connector{font-size:.9em;margin:.2em 0;white-space:nowrap}.vue-component.model-builder .block .connector.noValue{color:red}.vue-component.model-builder .block .connector.editable .label,.vue-component.model-builder .block .connector.editable .value{cursor:pointer}.vue-component.model-builder .block .connector span[title]{cursor:help}.vue-component.model-builder .block .connector .input{max-width:100%;overflow:hidden;text-overflow:ellipsis}.vue-component.model-builder .block .connector .output{text-align:right}.vue-component.model-builder .block .connector .unspecified{color:red;margin-right:.3em}.vue-component.model-builder .block .connector .circle{width:.8em;height:.8em;margin:0 .2em;border:1px solid #888;background-color:#0000;display:inline-block}.vue-component.model-builder .block .connector .circle.io_active{background-color:#ffc800}.vue-component.model-builder .block .connector .circle.io_selected{background-color:#00c800!important}.vue-component.model-builder .block .connector .circle.io_issues{background-color:red}.vue-component.model-builder.editable .circle{cursor:pointer}`, ""]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ },

/***/ 5218
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  A: () => (/* binding */ Edge)
});

;// ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??ruleSet[1].rules[3]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./components/model-builder/Edge.vue?vue&type=template&id=25fda632
var render = function render() {
  var _vm = this,
    _c = _vm._self._c;
  return _c('g', _vm._l(_vm.lines, function (line, i) {
    return _c('line', _vm._b({
      key: i
    }, 'line', line, false));
  }), 0);
};
var staticRenderFns = [];

;// ./components/model-builder/segment.js
class Segment {
  constructor(x, y, dx, dy) {
    this.x = x;
    this.y = y;
    this.dx = dx;
    this.dy = dy;
  }

  /**
   * Distance
   */
  distance(point1, point2) {
    return Math.sqrt(Math.pow(point2.x - point1.x, 2) + Math.pow(point2.y - point1.y, 2));
  }

  /**
   * Distance with a point
   */
  distanceP(point) {
    var normal = this.normal();
    normal.x = point.x;
    normal.y = point.y;
    var intersection = this.intersection(normal);
    return [intersection[0], this.distance(normal.alpha(intersection[1]), point)];
  }

  /**
   * Normal
   */
  normal() {
    return new Segment(this.x, this.y, this.dy, -this.dx);
  }

  /**
   * Gets the intersection alpha with another 
   */
  intersection(other) {
    var a = this.dx;
    var b = -other.dx;
    var c = this.dy;
    var d = -other.dy;
    var b0 = other.x - this.x;
    var b1 = other.y - this.y;
    var det = a * d - b * c;
    if (det == 0) {
      return null;
    }
    var r1 = (d * b0 - b * b1) / det;
    var r2 = (-c * b0 + a * b1) / det;
    return [r1, r2];
  }

  /**
   * Gets the alpha point
   */
  alpha(a) {
    var point = {};
    point.x = this.x + this.dx * a;
    point.y = this.y + this.dy * a;
    return point;
  }
}
;// ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./components/model-builder/Edge.vue?vue&type=script&lang=js

/* harmony default export */ const Edgevue_type_script_lang_js = ({
  name: 'Edge',
  props: {
    id: {},
    parameter1: {
      type: Object,
      required: true
    },
    parameter2: {
      type: Object,
      required: true
    },
    selected: {
      type: Boolean,
      default: false
    },
    inactive: {
      type: Boolean,
      default: false
    },
    issues: {
      type: Array,
      default: () => []
    },
    lineWidth: {
      type: Number,
      default: 3
    },
    lineColor: {
      type: Array,
      default: () => [255, 200, 0, 1]
    },
    state: {
      type: Object,
      required: true
    }
  },
  data() {
    return {
      position1: null,
      position2: null
    };
  },
  computed: {
    segment() {
      return new Segment(this.position1[0], this.position1[1], this.position2[0] - this.position1[0], this.position2[1] - this.position1[1]);
    },
    scaledLineWidth() {
      return this.lineWidth * this.state.scale;
    },
    lines() {
      // Drawing the arrow
      var xM = (this.position1[0] + this.position2[0]) / 2.0;
      var yM = (this.position1[1] + this.position2[1]) / 2.0;
      var alpha = 35 * Math.PI / 180.0;
      var cos = Math.cos(alpha);
      var sin = Math.sin(alpha);
      var cosB = Math.cos(-alpha);
      var sinB = Math.sin(-alpha);
      var norm = Math.sqrt(Math.pow(this.position1[0] - this.position2[0], 2) + Math.pow(this.position1[1] - this.position2[1], 2));
      var arrowLength = this.state.scale * 10 / (norm / 1.5);
      var xA = (this.position1[0] - xM) * arrowLength;
      var yA = (this.position1[1] - yM) * arrowLength;
      var lineStyle = this.getLineStyle(this.scaledLineWidth, this.selected, this.inactive);
      var arrowStyle = this.getLineStyle(this.scaledLineWidth / 1.5, this.selected);
      var mainLine = this.getLine(this.position1[0], this.position1[1], this.position2[0], this.position2[1], lineStyle);
      if (this.inactive || norm / this.state.scale < 25) {
        // Hide arrow
        return [mainLine];
      } else {
        return [mainLine, this.getLine(xM, yM, xM + (xA * cos - yA * sin), yM + (yA * cos + xA * sin), arrowStyle), this.getLine(xM, yM, xM + (xA * cosB - yA * sinB), yM + (yA * cosB + xA * sinB), arrowStyle)];
      }
    }
  },
  watch: {
    'state.center'() {
      this.updatePositions();
    },
    'state.scale'() {
      this.updatePositions();
    },
    'state.moving'() {
      this.updatePositions();
    }
  },
  created() {
    this.updatePositions();
  },
  mounted() {
    this.$emit('mounted', this);
  },
  beforeDestroy() {
    this.$emit('unmounted', this);
  },
  methods: {
    updatePositions() {
      let pos1 = this.parameter1.getCirclePosition();
      let pos2 = this.parameter2.getCirclePosition();
      if (!pos1 || !pos2) {
        return;
      }
      if (!this.position1 || !this.position2 || pos1[0] !== this.position1[0] || pos1[1] !== this.position1[1] || pos2[0] !== this.position2[0] || pos2[1] !== this.position2[1]) {
        this.position1 = Object.freeze(pos1);
        this.position2 = Object.freeze(pos2);
        this.$emit('position', this.position1, this.position2);
      }
    },
    getLineStyle(lineWidth, selected = false, dashed = false) {
      let dashLength = 2 * this.state.scale;
      let color = this.lineColor;
      if (selected) {
        color = [0, 200, 0, 1];
      } else if (this.issues.length > 0) {
        color = [255, 0, 0, 1];
      }
      return {
        'stroke': `rgba(${color.join(', ')})`,
        'stroke-width': lineWidth,
        'stroke-dasharray': dashed ? dashLength * 3 + ' ' + dashLength * 2 : 'none'
      };
    },
    /**
     * Get line options.
     * 
     * @param x1 {number} The x-coordinate for the start of the line.
     * @param y1 {number} The y-coordinate for the start of the line.
     * @param x2 {number} The x-coordinate for the end of the line.
     * @param y2 {number} The y-coordinate for the end of the line.
     * @param [settings] {object} Additional settings for this node.
     * @return {object} Options for SVG Line
     */
    getLine(x1, y1, x2, y2, settings = {}) {
      return Object.assign({
        x1,
        y1,
        x2,
        y2
      }, settings);
    },
    /**
     * Does the position collide the line ?
     */
    collide(x, y) {
      if (!this.segment) {
        return false;
      }
      var dp = this.segment.distanceP({
        x: x,
        y: y
      });
      if (dp[0] >= 0 && dp[0] <= 1) {
        if (dp[1] < this.lineWidth * this.state.scale * 2) {
          return dp[0];
        }
      }
      return false;
    },
    /**
     * Test if this edge is the same than another
     */
    equals(other) {
      if (this.parameter1 == other.parameter1 && this.parameter2 == other.parameter2) {
        return true;
      } else if (this.parameter1 == other.parameter2 && this.parameter2 == other.parameter1) {
        return true;
      }
      return false;
    }
  }
});
;// ./components/model-builder/Edge.vue?vue&type=script&lang=js
 /* harmony default export */ const model_builder_Edgevue_type_script_lang_js = (Edgevue_type_script_lang_js); 
// EXTERNAL MODULE: ./node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js
var componentNormalizer = __webpack_require__(1656);
;// ./components/model-builder/Edge.vue





/* normalize component */
;
var component = (0,componentNormalizer/* default */.A)(
  model_builder_Edgevue_type_script_lang_js,
  render,
  staticRenderFns,
  false,
  null,
  null,
  null
  ,true
)

/* harmony default export */ const Edge = (component.exports);

/***/ },

/***/ 5440
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_vue_style_loader_index_js_clonedRuleSet_22_use_0_node_modules_css_loader_dist_cjs_js_clonedRuleSet_22_use_1_node_modules_vue_vue_loader_v15_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_22_use_2_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_22_use_3_node_modules_sass_loader_dist_cjs_js_clonedRuleSet_22_use_4_node_modules_vue_vue_loader_v15_lib_index_js_vue_loader_options_BlockParameter_vue_vue_type_style_index_0_id_b7329df8_prod_lang_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7313);
/* harmony import */ var _node_modules_vue_style_loader_index_js_clonedRuleSet_22_use_0_node_modules_css_loader_dist_cjs_js_clonedRuleSet_22_use_1_node_modules_vue_vue_loader_v15_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_22_use_2_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_22_use_3_node_modules_sass_loader_dist_cjs_js_clonedRuleSet_22_use_4_node_modules_vue_vue_loader_v15_lib_index_js_vue_loader_options_BlockParameter_vue_vue_type_style_index_0_id_b7329df8_prod_lang_scss__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_vue_style_loader_index_js_clonedRuleSet_22_use_0_node_modules_css_loader_dist_cjs_js_clonedRuleSet_22_use_1_node_modules_vue_vue_loader_v15_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_22_use_2_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_22_use_3_node_modules_sass_loader_dist_cjs_js_clonedRuleSet_22_use_4_node_modules_vue_vue_loader_v15_lib_index_js_vue_loader_options_BlockParameter_vue_vue_type_style_index_0_id_b7329df8_prod_lang_scss__WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};
/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _node_modules_vue_style_loader_index_js_clonedRuleSet_22_use_0_node_modules_css_loader_dist_cjs_js_clonedRuleSet_22_use_1_node_modules_vue_vue_loader_v15_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_22_use_2_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_22_use_3_node_modules_sass_loader_dist_cjs_js_clonedRuleSet_22_use_4_node_modules_vue_vue_loader_v15_lib_index_js_vue_loader_options_BlockParameter_vue_vue_type_style_index_0_id_b7329df8_prod_lang_scss__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== "default") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _node_modules_vue_style_loader_index_js_clonedRuleSet_22_use_0_node_modules_css_loader_dist_cjs_js_clonedRuleSet_22_use_1_node_modules_vue_vue_loader_v15_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_22_use_2_node_modules_postcss_loader_dist_cjs_js_clonedRuleSet_22_use_3_node_modules_sass_loader_dist_cjs_js_clonedRuleSet_22_use_4_node_modules_vue_vue_loader_v15_lib_index_js_vue_loader_options_BlockParameter_vue_vue_type_style_index_0_id_b7329df8_prod_lang_scss__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]
/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);


/***/ },

/***/ 5491
(module, __unused_webpack_exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(8761);
if(content.__esModule) content = content.default;
if(typeof content === 'string') content = [[module.id, content, '']];
if(content.locals) module.exports = content.locals;
// add CSS to Shadow Root
var add = (__webpack_require__(9547)/* ["default"] */ .A)
module.exports.__inject__ = function (shadowRoot) {
  add("659ac37e", content, shadowRoot)
};

/***/ },

/***/ 6914
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  A: () => (/* binding */ Block)
});

;// ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??ruleSet[1].rules[3]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./components/model-builder/Block.vue?vue&type=template&id=738e9c36
var render = function render() {
  var _vm = this,
    _c = _vm._self._c;
  return _c('div', {
    ref: "div",
    class: _vm.containerClasses,
    style: _vm.styles,
    attrs: {
      "id": 'block' + this.id
    },
    on: {
      "mousedown": function ($event) {
        if (!$event.type.indexOf('key') && _vm._k($event.keyCode, "left", 37, $event.key, ["Left", "ArrowLeft"])) return null;
        $event.preventDefault();
        $event.stopPropagation();
        if ('button' in $event && $event.button !== 0) return null;
        return _vm.onMouseDown.apply(null, arguments);
      }
    }
  }, [_c('div', {
    staticClass: "blockTitle",
    on: {
      "mousedown": function ($event) {
        if (!$event.type.indexOf('key') && _vm._k($event.keyCode, "left", 37, $event.key, ["Left", "ArrowLeft"])) return null;
        $event.preventDefault();
        $event.stopPropagation();
        if ('button' in $event && $event.button !== 0) return null;
        return _vm.emitDrag.apply(null, arguments);
      }
    }
  }, [_c('span', {
    staticClass: "titleText",
    attrs: {
      "title": _vm.plainTitle
    }
  }, [_c('span', {
    directives: [{
      name: "show",
      rawName: "v-show",
      value: _vm.invalid,
      expression: "invalid"
    }],
    staticClass: "invalid",
    attrs: {
      "title": "Process or Collection not supported!"
    }
  }, [_c('i', {
    staticClass: "fas fa-exclamation-triangle"
  })]), _vm._v(" " + _vm._s(_vm.name) + " "), _vm.showId ? _c('span', {
    staticClass: "blockId"
  }, [_vm._v(_vm._s(_vm.id))]) : _vm._e()]), _c('div', {
    staticClass: "blockicon",
    on: {
      "mousedown": function ($event) {
        if (!$event.type.indexOf('key') && _vm._k($event.keyCode, "left", 37, $event.key, ["Left", "ArrowLeft"])) return null;
        $event.preventDefault();
        $event.stopPropagation();
        if ('button' in $event && $event.button !== 0) return null;
        return _vm.focus();
      }
    }
  }, [_c('span', {
    directives: [{
      name: "show",
      rawName: "v-show",
      value: _vm.allowsDescription && !_vm.showDescriptionField,
      expression: "allowsDescription && !showDescriptionField"
    }],
    staticClass: "addDescription",
    attrs: {
      "title": "Add description"
    },
    on: {
      "click": function ($event) {
        $event.stopPropagation();
        $event.preventDefault();
        return _vm.addDescription();
      }
    }
  }, [_c('i', {
    staticClass: "fas fa-comment-medical"
  })]), _c('span', {
    directives: [{
      name: "show",
      rawName: "v-show",
      value: _vm.allowsDuplicate,
      expression: "allowsDuplicate"
    }],
    staticClass: "duplicate",
    attrs: {
      "title": "Duplicate"
    },
    on: {
      "click": function ($event) {
        $event.stopPropagation();
        $event.preventDefault();
        return _vm.duplicate.apply(null, arguments);
      }
    }
  }, [_c('i', {
    staticClass: "fas fa-clone"
  })]), _c('span', {
    directives: [{
      name: "show",
      rawName: "v-show",
      value: _vm.allowsDelete,
      expression: "allowsDelete"
    }],
    staticClass: "delete",
    attrs: {
      "title": "Remove (DEL)"
    },
    on: {
      "click": function ($event) {
        $event.stopPropagation();
        $event.preventDefault();
        return _vm.remove();
      }
    }
  }, [_c('i', {
    staticClass: "fas fa-trash"
  })]), _c('span', {
    directives: [{
      name: "show",
      rawName: "v-show",
      value: _vm.allowsInfo,
      expression: "allowsInfo"
    }],
    staticClass: "info",
    attrs: {
      "title": "Details"
    },
    on: {
      "click": function ($event) {
        $event.stopPropagation();
        $event.preventDefault();
        return _vm.showInfo();
      }
    }
  }, [_c('i', {
    staticClass: "fas fa-info"
  })]), _c('span', {
    directives: [{
      name: "show",
      rawName: "v-show",
      value: _vm.allowsParameterChange,
      expression: "allowsParameterChange"
    }],
    staticClass: "settings",
    attrs: {
      "title": _vm.isParameter ? 'Edit parameter' : 'Change parameter values'
    },
    on: {
      "click": function ($event) {
        $event.stopPropagation();
        $event.preventDefault();
        return _vm.edit.apply(null, arguments);
      }
    }
  }, [_c('i', {
    staticClass: "fas fa-edit"
  })])])]), _c('div', {
    staticClass: "inout"
  }, [_c('div', {
    staticClass: "inputs"
  }, _vm._l(_vm.parameters, function (param, i) {
    return _c('BlockParameter', {
      key: i,
      ref: "parameters",
      refInFor: true,
      attrs: {
        "state": _vm.state,
        "value": _vm.args[param.name],
        "name": param.name,
        "description": param.description,
        "optional": param.optional,
        "deprecated": param.deprecated,
        "experimental": param.experimental,
        "default": param.default,
        "schema": param.schema
      },
      on: {
        "input": value => _vm.updateArgument(param.name, value),
        "edgesChanged": function ($event) {
          return _vm.edgesChanged(param, $event);
        }
      }
    });
  }), 1), _c('div', {
    staticClass: "outputs"
  }, [_c('BlockParameter', _vm._b({
    ref: "output",
    attrs: {
      "state": _vm.state,
      "label": _vm.outputLabel
    },
    on: {
      "input": _vm.updateResult
    }
  }, 'BlockParameter', _vm.output, false))], 1)]), _vm.showDescriptionField ? _c('textarea', {
    ref: "descriptionField",
    staticClass: "editDescription",
    attrs: {
      "readonly": !_vm.state.editable,
      "placeholder": "Type description here..."
    },
    domProps: {
      "value": _vm.description
    },
    on: {
      "input": _vm.updateDescription,
      "blur": _vm.updateDescription,
      "mousedown": function ($event) {
        $event.stopPropagation();
      }
    }
  }) : _vm._e()]);
};
var staticRenderFns = [];

;// ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/@vue/vue-loader-v15/lib/loaders/templateLoader.js??ruleSet[1].rules[3]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./components/model-builder/BlockParameter.vue?vue&type=template&id=b7329df8
var BlockParametervue_type_template_id_b7329df8_render = function render() {
  var _vm = this,
    _c = _vm._self._c;
  return _c('div', {
    class: _vm.classes
  }, [!_vm.output ? _c('div', _vm._g({
    ref: "circle",
    class: _vm.circleClasses
  }, _vm.circleListeners)) : _vm._e(), _c('span', _vm._g({
    staticClass: "text"
  }, _vm.textListeners), [_c('span', {
    directives: [{
      name: "show",
      rawName: "v-show",
      value: _vm.unspecified,
      expression: "unspecified"
    }],
    staticClass: "unspecified",
    attrs: {
      "title": "Parameter is likely unsupported!"
    }
  }, [_c('i', {
    staticClass: "fas fa-exclamation-triangle"
  })]), _c('span', {
    staticClass: "label"
  }, [_vm._v(_vm._s(_vm.displayLabel))]), _vm.displayValue.length ? [_vm._v(": ")] : _vm._e(), _c('span', {
    staticClass: "value",
    domProps: {
      "innerHTML": _vm._s(_vm.displayValue)
    }
  })], 2), _vm.output ? _c('div', _vm._g({
    ref: "circle",
    class: _vm.circleClasses,
    attrs: {
      "title": "Output of the process"
    }
  }, _vm.circleListeners)) : _vm._e()]);
};
var BlockParametervue_type_template_id_b7329df8_staticRenderFns = [];

// EXTERNAL MODULE: ./node_modules/@openeo/js-commons/src/main.js
var main = __webpack_require__(1572);
// EXTERNAL MODULE: ./node_modules/@openeo/js-processgraphs/src/main.js
var src_main = __webpack_require__(4894);
// EXTERNAL MODULE: ./utils.js + 4 modules
var utils = __webpack_require__(9061);
;// ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./components/model-builder/BlockParameter.vue?vue&type=script&lang=js



/* harmony default export */ const BlockParametervue_type_script_lang_js = ({
  name: 'BlockParameter',
  props: {
    name: {
      type: String,
      default: 'output'
    },
    description: {
      type: String,
      default: ''
    },
    optional: {
      type: Boolean,
      default: false
    },
    deprecated: {
      type: Boolean,
      default: false
    },
    experimental: {
      type: Boolean,
      default: false
    },
    default: {},
    value: {},
    schema: {
      type: [Object, Array],
      default: null
    },
    label: {
      type: String
    },
    output: {
      type: Boolean,
      default: false
    },
    state: {
      type: Object,
      required: true
    }
  },
  data() {
    return {
      // The attached edges
      edges: []
    };
  },
  computed: {
    schemas() {
      if (this.schema instanceof main.ProcessSchema) {
        return this.schema;
      } else {
        return new main.ProcessSchema(this.schema);
      }
    },
    hasValue() {
      return this.value !== undefined;
    },
    textListeners() {
      if (this.allowsArgumentChange) {
        return {
          click: this.openEditorForArguments
        };
      } else {
        return {};
      }
    },
    circleListeners() {
      var listeners = {};
      if (this.state.editable) {
        listeners.mousedown = event => {
          if (event.which == 1) {
            this.state.root.link(this);
            event.preventDefault();
            event.stopPropagation();
          }
        };
        if (this.output) {
          // Allow specifying the result node
          listeners.dblclick = event => {
            if (event.which == 1) {
              this.$emit('input', true);
            }
          };
        }

        // Handle focus on the I/Os
        listeners.mouseover = () => this.state.linkFrom && this.state.root.link(this);
        listeners.mouseout = () => this.state.linkTo && this.state.root.unlink(this);
      }
      return listeners;
    },
    classes() {
      let classes = [this.output ? 'output' : 'input', 'connector', 'field_' + this.name, this.hasValue || this.optional || this.output || this.getEdgeCount() > 0 ? 'hasValue' : 'noValue'];
      if (this.allowsArgumentChange) {
        classes.push("editable");
      }
      return classes;
    },
    unspecified() {
      return !this.$parent.invalid && this.state.root.hasProcesses && this.schemas.unspecified;
    },
    circleClasses() {
      var classes = ['circle'];
      if (this.getEdgeCount() > 0) {
        classes.push('io_active');
      }
      for (var edge of this.edges) {
        if (edge.selected) {
          classes.push('io_selected');
        } else if (edge.issues.length > 0) {
          classes.push('io_issues');
        }
      }
      if (this.state.linkFrom == this || this.state.linkTo == this) {
        classes.push('io_selected');
      }
      return classes;
    },
    displayValue() {
      var maxLength = 38 - this.displayLabel.length;
      var formattedValue = null;
      if (this.isEditable && !this.state.compactMode && !utils/* default */.A.isRef(this.value)) {
        let value = typeof this.value !== 'undefined' ? this.value : this.default;
        if (typeof value !== 'undefined') {
          formattedValue = this.formatValue(value, maxLength, true);
        }
      }
      if (typeof formattedValue === 'string') {
        if (formattedValue.length === 0) {
          formattedValue = '<em>Empty</em>';
        }
      } else {
        formattedValue = '';
      }
      return formattedValue;
    },
    displayLabel() {
      if (this.output && this.state.compactMode) {
        return '';
      } else if (typeof this.label === 'string' && (this.label.length > 0 || this.output)) {
        return this.label;
      } else {
        return this.name;
      }
    },
    isArrayType() {
      return this.schemas.nativeDataType() === 'array';
    },
    isObjectType() {
      return this.schemas.nativeDataType() === 'object';
    },
    isEditable() {
      return !this.output && this.schemas.isEditable();
    },
    allowsArgumentChange() {
      return !this.output && this.schemas.isEditable();
    },
    allowsMultipleInputs() {
      // Is there any type that potentially allows multiple inputs?
      return this.isArrayType || this.isObjectType || this.schemas.nativeDataType() === 'any';
    }
  },
  watch: {
    edges() {
      this.updateEdgeStatus();
      this.$emit('edgesChanged', this.edges, this);
    },
    value: {
      immediate: true,
      handler() {
        this.updateEdgeStatus();
      }
    }
  },
  methods: {
    updateEdgeStatus() {
      if (!this.output) {
        for (var edge of this.edges) {
          edge.inactive = !this.isEdgeUsed(edge);
        }
      }
    },
    getCirclePosition() {
      try {
        var dim = this.state.root.domBoundingBox(this.$refs.circle);
        var blocksDim = this.state.root.getDimensions();
        var x = dim.offsetLeft - blocksDim.offsetLeft + dim.width / 2;
        var y = dim.offsetTop - blocksDim.offsetTop + dim.height / 2;
        return [x, y];
      } catch (error) {
        console.warn(error);
        return null;
      }
    },
    openEditorForArguments() {
      if (this.allowsArgumentChange) {
        this.$parent.showArguments(this.name);
      }
    },
    jsonSchema() {
      return this.schemas.toJSON();
    },
    setValue(value) {
      if (this.schemas.nativeDataType() == 'boolean' && !utils/* default */.A.isRef(value)) {
        value = !!value;
      }
      this.$emit('input', value);
    },
    resetValue() {
      if (typeof this.default !== 'undefined') {
        this.setValue(this.default);
        return;
      }
      var value;
      if (this.schemas.nullable()) {
        value = null;
      } else {
        var dataType = this.schemas.nativeDataType();
        switch (dataType) {
          case 'object':
            value = {};
            break;
          case 'array':
            value = [];
            break;
          case 'string':
            value = '';
            break;
          case 'integer':
          case 'number':
            value = 0;
            break;
          case 'boolean':
            value = false;
            break;
          default:
            value = undefined;
        }
      }
      this.setValue(value);
    },
    getEdgeRef(edge) {
      if (this.output) {
        return this.value;
      } else {
        return edge.parameter1.value;
      }
    },
    addRefToValue(edge) {
      var ref = this.getEdgeRef(edge);
      if (!ref) {
        return;
      } else if (!this.allowsMultipleInputs) {
        this.setValue(ref);
      } else if (this.isArrayType) {
        if (utils/* default */.A.isRef(this.value)) {
          this.setValue([this.value, ref]);
        } else if (Array.isArray(this.value) && this.value.length > 0) {
          var value = this.value;
          value.push(ref);
          this.setValue(value);
        } else {
          this.setValue(ref);
        }
      } else if (this.isObjectType) {
        var propertyCount = utils/* default */.A.size(this.value);
        if (this.getEdgeCount() === 1 && (!this.hasValue || !propertyCount)) {
          this.setValue(ref);
        } else if (!propertyCount) {
          this.resetValue();
        } else {
          // Don't change value
        }
      } else {
        // ToDo: This is probably of data type mixed or any, how to handle?
        this.setValue(ref);
      }
    },
    removeRefFromValue(edge) {
      if (!this.output) {
        var ref = this.getEdgeRef(edge);
        if (utils/* default */.A.isRefEqual(ref, this.value)) {
          this.resetValue();
        } else if (this.isArrayType || this.isObjectType) {
          this.setValue(this.removeRefFromValueDeep(this.value, ref));
        }
      }
    },
    removeRefFromValueDeep(value, ref) {
      if (Array.isArray(value)) {
        var i = value.length;
        while (--i >= 0) {
          if (value[i] === null || typeof value[i] !== 'object') {
            continue;
          } else if (utils/* default */.A.isRefEqual(ref, value[i])) {
            value.splice(i, 1);
          } else {
            value[i] = this.removeRefFromValueDeep(value[i], ref);
          }
        }
      } else if (utils/* default */.A.isObject(value)) {
        for (var key in value) {
          if (!value.hasOwnProperty(key) || value[key] === null || typeof value[key] !== 'object') {
            continue;
          } else if (utils/* default */.A.isRefEqual(ref, value[key])) {
            delete value[key];
          } else {
            value[i] = this.removeRefFromValueDeep(value[key], ref);
          }
        }
      }
      return value;
    },
    addEdge(edge) {
      this.edges.push(edge);
      if (!this.isEdgeUsed(edge) && !this.output) {
        this.addRefToValue(edge);
      }
    },
    eraseEdge(edge) {
      for (var k in this.edges) {
        if (this.edges[k] == edge) {
          this.removeRefFromValue(edge);
          this.$delete(this.edges, k);
          return true;
        }
      }
      return false;
    },
    isEdgeUsed(edge) {
      var ref = this.getEdgeRef(edge);
      if (utils/* default */.A.isRefEqual(ref, this.value)) {
        return true;
      }
      return this.hasRefInValue(ref, this.value);
    },
    hasRefInValue(ref, value) {
      if (!value || typeof value !== 'object') {
        return false;
      } else if (utils/* default */.A.isRefEqual(ref, value)) {
        return true;
      }
      for (let key in value) {
        if (this.hasRefInValue(ref, value[key])) {
          return true;
        }
      }
      return false;
    },
    getEdgeCount() {
      return this.edges.length;
    },
    formatProcess(pg, maxLength) {
      if (pg instanceof src_main.ProcessGraph && pg.getNodeCount() === 1) {
        return this.formatValue(pg.getResultNode().process_id, maxLength);
      }
      var nodes = Object.values(pg.process_graph);
      if (nodes.length === 1) {
        return this.formatValue(nodes[0].process_id, maxLength);
      } else {
        return 'Process';
      }
    },
    formatValue(value, maxLength, html = true) {
      if (typeof value === 'object') {
        if (value === null) {
          return 'n/a';
        } else if (Array.isArray(value)) {
          return this.formatArray(value, maxLength, html);
        } else {
          return this.formatObject(value, maxLength, html);
        }
      } else if (typeof value === 'string') {
        if (value.length > maxLength) {
          var text = utils/* default */.A.htmlentities(value.substr(0, maxLength));
          return html ? text + '<span title="' + utils/* default */.A.htmlentities(value) + '">…</span>' : text;
        } else {
          return utils/* default */.A.htmlentities(value);
        }
      } else if (typeof value === 'boolean') {
        return value ? '✔️' : '❌';
      } else if (typeof value === 'number') {
        return value.toString();
      } else {
        return utils/* default */.A.htmlentities(JSON.stringify(value));
      }
    },
    formatArray(values, maxLength, html = true) {
      let parts = [];
      for (let i in values) {
        let value = values[i];
        let formatted = this.formatValue(value, 10, html);
        let unformatted = utils/* default */.A.htmlentities_decode(this.formatValue(value, 10, false));
        if (unformatted.length > maxLength) {
          if (parts.length === 0) {
            return this.formatArraySimple(values, 'List(' + values.length + ')');
          } else {
            parts.push(this.formatArraySimple(values, '…'));
            break;
          }
        }
        parts.push(formatted);
        maxLength -= unformatted.length + 2;
      }
      return parts.join(", ");
    },
    formatArraySimple(values, text, html = true) {
      if (html && values.length < 10) {
        let title = values.map(v => this.formatValue(v, 25, false)).join(', ');
        return '<span title="' + title + '">' + text + '</span>';
      } else {
        return text;
      }
    },
    formatObject(value, maxLength, html = true) {
      if (Object.keys(value).length === 0) {
        return 'None';
      } else if (value instanceof src_main.ProcessGraph || utils/* default */.A.isObject(value.process_graph)) {
        return this.formatProcess(value, maxLength);
      } else if (utils/* default */.A.isRef(value)) {
        return this.formatValue(utils/* default */.A.formatRef(value), maxLength);
      } else if (typeof value.west !== 'undefined' && typeof value.east !== 'undefined' && typeof value.south !== 'undefined' && typeof value.north !== 'undefined') {
        return maxLength >= 12 ? 'Bounding Box' : 'BBox';
      } else if (utils/* default */.A.detectGeoJson(value)) {
        return this.formatValue(value.type, maxLength);
      }

      // Fallback to default
      return html ? '<span title="' + utils/* default */.A.htmlentities(JSON.stringify(value)) + '">Object</span>' : 'Object';
    }
  }
});
;// ./components/model-builder/BlockParameter.vue?vue&type=script&lang=js
 /* harmony default export */ const model_builder_BlockParametervue_type_script_lang_js = (BlockParametervue_type_script_lang_js); 
// EXTERNAL MODULE: ./node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js
var componentNormalizer = __webpack_require__(1656);
;// ./components/model-builder/BlockParameter.vue



function injectStyles (context) {
  
  var style0 = __webpack_require__(5440)
if (style0.__inject__) style0.__inject__(context)

}

/* normalize component */

var component = (0,componentNormalizer/* default */.A)(
  model_builder_BlockParametervue_type_script_lang_js,
  BlockParametervue_type_template_id_b7329df8_render,
  BlockParametervue_type_template_id_b7329df8_staticRenderFns,
  false,
  injectStyles,
  null,
  null
  ,true
)

/* harmony default export */ const BlockParameter = (component.exports);
// EXTERNAL MODULE: ./components/model-builder/config.js
var config = __webpack_require__(7601);
;// ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./components/model-builder/Block.vue?vue&type=script&lang=js






/*
Events:

Emits locally:
- moved(x, y) - The block has been moved
- input(value) - The value has been updated
- move() - A block is now being moved
- mounted(node) - The block is now part of the DOM.
- unmounted(node) - The block not not part of the DOM anylonger.
*/

const defaultFontSize = 10;
/* harmony default export */ const Blockvue_type_script_lang_js = ({
  name: 'Block',
  components: {
    BlockParameter: BlockParameter
  },
  props: {
    id: {
      type: String,
      required: true
    },
    type: {
      type: String,
      required: true
    },
    selected: {
      type: Boolean,
      default: false
    },
    position: {
      type: Array,
      required: true
    },
    process_id: {
      type: String
    },
    namespace: {
      type: String,
      default: null
    },
    description: {
      type: String,
      default: null
    },
    args: {
      type: Object,
      default: () => ({})
    },
    result: {
      type: Boolean,
      default: false
    },
    origin: {
      type: String,
      default: null
    },
    spec: {
      type: Object,
      default: () => null
    },
    state: {
      type: Object,
      required: true
    }
  },
  data() {
    return {
      showDescriptionField: false,
      drag: null // Is the user dragging ?
    };
  },
  watch: {
    'state.compactMode'() {
      this.$emit('moved', this.position);
    },
    description: {
      immediate: true,
      handler() {
        this.showDescriptionField = this.description !== null;
      }
    }
  },
  computed: {
    // Visualizations
    width() {
      let size = config/* default */.A.blockWidth;
      if (this.parameters.length > 0) {
        return this.state.compactMode ? size.compactParams : size.normalParams;
      } else {
        return this.state.compactMode ? size.compact : size.normal;
      }
    },
    styles() {
      return {
        marginLeft: Math.round(this.state.center[0] + this.position[0] * this.state.scale) + 'px',
        marginTop: Math.round(this.state.center[1] + this.position[1] * this.state.scale) + 'px',
        fontSize: Math.round(this.state.scale * defaultFontSize) + 'px',
        width: Math.round(this.state.scale * this.width) + 'px'
      };
    },
    plainTitle() {
      let parts = [];
      parts.push(this.name);
      if (this.namespace) {
        parts.push(`@${this.namespace}`);
      }
      if (this.showId) {
        parts.push(` ${this.id}`);
      }
      return parts.join('');
    },
    name() {
      switch (this.type) {
        case 'process':
          if (this.collectionId) {
            return this.collectionId;
          } else {
            return this.processId;
          }
        case 'parameter':
          return this.spec.name;
        default:
          return this.id.substr(1);
      }
    },
    outputLabel() {
      if (this.result) {
        return "Result";
      } else if (this.isParameter) {
        return "Process Parameter";
      } else {
        return "";
      }
    },
    containerClasses() {
      var classes = ['block'];
      if (this.collectionId) {
        classes.push('block_collection');
      } else if (this.isParameter) {
        classes.push('block_argument');
      }
      if (this.result) {
        classes.push('block_result');
      }
      if (this.selected) {
        classes.push('block_selected');
      }
      if (this.invalid) {
        classes.push('block_invalid');
      }
      return classes;
    },
    invalid() {
      if (this.type !== 'process' || !this.$parent.hasProcesses) {
        // We can only check processes for validity
        // Also, don't check for validity if no processes to validate against are given
        return false;
      } else if (this.namespace && utils/* default */.A.isUrl(this.namespace)) {
        // If the namespace is a URL, then don't complain about a missing process
        return false;
      } else if (!this.processId) {
        return true;
      }

      // Check that the process exists
      if (!this.spec) {
        return true;
      }

      // Check that the collection exists
      if (this.processId === 'load_collection' && !utils/* default */.A.isRef(this.args.id)) {
        for (let collection of this.$parent.collections) {
          if (this.args.id === collection.id) {
            return false;
          }
        }
        return true;
      }
      return false;
    },
    processId() {
      if (this.type === 'process') {
        if (this.process_id) {
          return this.process_id;
        } else if (utils/* default */.A.isObject(this.spec) && this.spec.id) {
          return this.spec.id;
        }
      }
      return null;
    },
    collectionId() {
      if (this.type === 'process' && this.processId === 'load_collection' && !utils/* default */.A.isRef(this.args.id)) {
        return this.args.id;
      }
      return null;
    },
    isParameter() {
      return this.type === 'parameter';
    },
    allowsParameterChange() {
      if (this.isParameter) {
        return this.state.editable && this.origin !== 'schema' && !!this.$parent.supports('editParameter');
      } else {
        return this.parameters.filter(p => p.isEditable()).length > 0;
      }
    },
    allowsDuplicate() {
      return this.state.editable && this.type === 'process' && this.origin !== 'schema';
    },
    allowsDelete() {
      return this.state.editable && (!this.spec || utils/* default */.A.isObject(this.spec) && this.origin !== 'schema');
    },
    allowsInfo() {
      if (this.collectionId) {
        return this.$parent.supports('showCollection');
      } else if (this.isParameter) {
        return utils/* default */.A.isObject(this.spec) && this.$parent.supports('showParameter');
      } else {
        return this.$parent.supports('showProcess');
      }
    },
    allowsDescription() {
      // ToDo: Remove type restriction and store description for parameters.
      return this.state.editable && this.type === 'process';
    },
    showId() {
      return this.type !== 'parameter';
    },
    // Parameters and related
    hasParametersDefined() {
      return Boolean(utils/* default */.A.isObject(this.spec) && Array.isArray(this.spec.parameters) && this.spec.parameters.length > 0);
    },
    parameters() {
      let names = [];
      let parameters = [];
      if (this.hasParametersDefined) {
        parameters = this.spec.parameters.map(p => new main.ProcessParameter(p));
        names = parameters.map(p => p.name);
      }
      if (utils/* default */.A.size(this.args) > 0) {
        for (var key in this.args) {
          if (!names.includes(key)) {
            parameters.push(new main.ProcessParameter({
              name: key,
              description: ''
            }));
          }
        }
      }
      return parameters;
    },
    fields() {
      var fields = {};
      for (var p of this.parameters) {
        fields[p.name] = p;
      }
      fields.output = this.output;
      return fields;
    },
    output() {
      var spec = {};
      if (utils/* default */.A.isObject(this.spec)) {
        if (this.isParameter) {
          spec = this.spec;
        } else if (utils/* default */.A.isObject(this.spec.returns)) {
          spec = this.spec.returns;
        }
      }
      var output = {
        name: "output",
        schema: spec.schema || {},
        description: spec.description || '',
        optional: true,
        output: true,
        value: {}
      };
      if (this.isParameter) {
        output.value.from_parameter = this.id.substr(1);
      } else {
        output.value.from_node = this.id.substr(1);
      }
      return output;
    }
  },
  mounted() {
    // ToDo: Move mousemove listener for dragging to Blocks?
    this.draggingFn = this.dragging.bind(this);
    document.addEventListener('mousemove', this.draggingFn);
    // ToDO: Replace with mouseleave?
    this.stopDragFn = this.stopDrag.bind(this);
    document.addEventListener('mouseup', this.stopDragFn);
    this.$emit('mounted', this);
  },
  beforeDestroy() {
    document.removeEventListener('mousemove', this.draggingFn);
    document.removeEventListener('mouseup', this.stopDragFn);
    this.$emit('unmounted', this);
  },
  methods: {
    edit() {
      if (this.isParameter) {
        this.editParameter();
      } else {
        this.showArguments();
      }
    },
    duplicate() {
      this.$parent.$emit('duplicate', {
        position: this.position,
        process_id: this.process_id,
        namespace: this.namespace,
        arguments: this.args,
        description: this.description
      });
    },
    hasParameter(name) {
      return this.hasParametersDefined && !!this.spec.parameters.find(p => p.name === name);
    },
    updateDescription(event) {
      let elem = event.composedPath()[0]; // event.target doesn't work in web components
      let value;
      if (elem && typeof elem.value === 'string' && (elem.value.length > 0 || event.type === 'input')) {
        value = elem.value;
      } else {
        value = null;
      }
      this.showDescriptionField = value !== null;
      if (this.description !== value) {
        this.$emit('update', 'description', value);
      }
    },
    updatePosition(pos, saveHistory = true) {
      pos = utils/* default */.A.ensurePoint(pos);
      if (this.position[0] !== pos[0] || this.position[1] !== pos[1]) {
        this.$emit('update', 'position', pos, saveHistory);
      }
    },
    updateArguments(value) {
      let removeParameters = Object.keys(this.args).filter(key => typeof value[key] === 'undefined' && (!this.hasParametersDefined || this.hasParameter(key)));
      // Remove default values
      for (let p of this.parameters) {
        if (typeof value[p.name] !== 'undefined' && p.optional && typeof p.default !== 'undefined' && utils/* default */.A.equals(p.default, value[p.name])) {
          delete value[p.name];
        }
      }
      this.$emit('update', 'arguments', value, removeParameters);
    },
    updateArgument(key, value) {
      let args = utils/* default */.A.deepClone(this.args);
      args[key] = value;
      this.updateArguments(args);
    },
    updateResult(value) {
      if (this.hasOutputEdges()) {
        this.state.root.$emit("error", "A result node can't have outgoing edges.");
        return;
      }
      if (value !== this.result) {
        this.$emit('update', 'result', value);
      }
    },
    focus() {
      this.$parent.focus();
    },
    onMouseDown(event) {
      this.select(!this.selected, !event.shiftKey);
    },
    select(selected = true, unselectOthers = true) {
      this.$emit('update', 'selected', selected, unselectOthers);
      this.focus();
    },
    getDimensions() {
      let dim = this.$parent.domBoundingBox(this.$refs.div);
      var blocksDim = this.$parent.getDimensions();
      dim.x = dim.offsetLeft - blocksDim.offsetLeft;
      dim.y = dim.offsetTop - blocksDim.offsetTop;
      return dim;
    },
    edgesChanged(parameter, edges) {
      parameter.refs = edges.map(edge => edge.parameter1.value);
    },
    editParameter() {
      this.$parent.$emit('editParameter', this.spec, "Edit Parameter: " + this.plainTitle, data => this.$emit('update', 'spec', data));
    },
    showArguments(parameterName = null) {
      this.$parent.$emit('editArguments', this.parameters.filter(p => p.isEditable()), this.args, this.plainTitle, this.state.editable, parameterName, data => this.updateArguments(data), this);
    },
    showInfo() {
      if (this.collectionId) {
        this.$parent.$emit('showCollection', this.collectionId);
      } else if (this.isParameter) {
        this.$parent.$emit('showParameter', this.spec, this.origin);
      } else {
        this.$parent.$emit('showProcess', this.processId, this.namespace);
      }
    },
    async addDescription() {
      this.select();
      this.showDescriptionField = true;
      await this.$nextTick();
      this.$refs.descriptionField.focus();
    },
    async emitDrag(event) {
      this.select(true, !event.shiftKey);
      this.focus();
      await this.$nextTick();
      this.$emit('move', event);
    },
    getDragPos(pos, mouse) {
      return [mouse[0] / this.state.scale - pos[0], mouse[1] / this.state.scale - pos[1]];
    },
    startDrag(event) {
      if (!this.selected) {
        return;
      }
      let mousePos = this.$parent.getMousePos(event);
      this.drag = {
        origin: this.position,
        mouse: this.getDragPos(this.position, mousePos)
      };
    },
    stopDrag() {
      if (!this.drag) {
        return;
      }
      var delta = 5 / this.state.scale; // Only store History if block was moved enough
      if (Math.abs(this.drag.origin[0] - this.position[0]) > delta || Math.abs(this.drag.origin[1] - this.position[1]) > delta) {
        this.updatePosition(this.position);
      }
      this.drag = null;
    },
    dragging(event) {
      if (!this.drag) {
        return;
      }
      let mousePos = this.$parent.getMousePos(event);
      let drapPos = this.getDragPos(this.drag.mouse, mousePos);
      // Don't store for each run a history step...
      this.updatePosition(drapPos, false);
    },
    hasOutputEdges() {
      return this.$refs.output && this.$refs.output.getEdgeCount() > 0;
    },
    async remove() {
      await this.$parent.removeBlock(this);
    },
    /**
     * Getting a field by name
     */
    getBlockParameter(name) {
      if (name === 'output' && this.$refs.output) {
        return this.$refs.output;
      } else if (Array.isArray(this.$refs.parameters)) {
        var params = this.$refs.parameters.filter(param => param.name === name);
        if (params.length > 0) {
          return params[0];
        }
      }
      return null;
    },
    isParameterScoped(parameterName, referenceName) {
      let parameterBlock = this.getBlockParameter(parameterName);
      let cbParams = main.ProcessUtils.getCallbackParameters(parameterBlock).map(cbParam => cbParam.name);
      return cbParams.includes(referenceName);
    },
    hiddenParameterRef(parameterBlock) {
      if (this.type !== 'process') {
        return null;
      }
      let globalParam = parameterBlock.id.substr(1);
      for (let argName in this.args) {
        let value = this.args[argName];
        if (utils/* default */.A.isObject(value) && utils/* default */.A.isObject(value.process_graph)) {
          let refs = src_main.Utils.getRefs(value, true, true);
          if (refs.find(r => r.from_parameter === globalParam && !this.isParameterScoped(argName, r.from_parameter))) {
            return argName;
          }
        }
      }
      return null;
    }
  }
});
;// ./components/model-builder/Block.vue?vue&type=script&lang=js
 /* harmony default export */ const model_builder_Blockvue_type_script_lang_js = (Blockvue_type_script_lang_js); 
;// ./components/model-builder/Block.vue



function Block_injectStyles (context) {
  
  var style0 = __webpack_require__(1247)
if (style0.__inject__) style0.__inject__(context)

}

/* normalize component */

var Block_component = (0,componentNormalizer/* default */.A)(
  model_builder_Blockvue_type_script_lang_js,
  render,
  staticRenderFns,
  false,
  Block_injectStyles,
  null,
  null
  ,true
)

/* harmony default export */ const Block = (Block_component.exports);

/***/ },

/***/ 7313
(module, __unused_webpack_exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(1443);
if(content.__esModule) content = content.default;
if(typeof content === 'string') content = [[module.id, content, '']];
if(content.locals) module.exports = content.locals;
// add CSS to Shadow Root
var add = (__webpack_require__(9547)/* ["default"] */ .A)
module.exports.__inject__ = function (shadowRoot) {
  add("e1274b88", content, shadowRoot)
};

/***/ },

/***/ 7601
(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
  defaultScale: 1.3,
  blockWidth: {
    compactParams: 110,
    compact: 60,
    normalParams: 220,
    normal: 110
  }
});

/***/ },

/***/ 8761
(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1601);
/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6314);
/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
// Imports


var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));
// Module
___CSS_LOADER_EXPORT___.push([module.id, `.vue-component.model-builder .block{position:absolute;border:2px solid #ccc;margin-left:0;margin-top:0;background-color:#fafafa;opacity:.8;font-size:14px;user-select:none;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;color:#000}.vue-component.model-builder .block .description{display:none;width:200px;padding:3px;border:1px solid #083776;border-radius:5px;color:#001531;background-color:#91bcf6;margin-top:15px;position:absolute;font-weight:400}.vue-component.model-builder .block .blockTitle{display:flex;padding:.3em .1em;font-weight:700;background-color:#ddd;margin-bottom:.1em;cursor:move;font-size:.9em}.vue-component.model-builder .block .blockTitle .blockId{opacity:.4;margin-left:.25em;font-weight:400}.vue-component.model-builder .block .blockTitle .namespace{font-weight:400}.vue-component.model-builder .block .blockTitle .titleText{flex-grow:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.vue-component.model-builder .block .blockTitle .blockicon{white-space:nowrap;text-align:center}.vue-component.model-builder .block .blockTitle .blockicon i.fas{min-width:1.4em;cursor:pointer;opacity:.5;margin-left:.1em}.vue-component.model-builder .block .blockTitle .blockicon i.fas:hover{opacity:1}.vue-component.model-builder .block .invalid{color:red;cursor:help}.vue-component.model-builder .block .inout{display:flex}.vue-component.model-builder .block .inputs{flex-grow:1;max-width:100%;overflow:hidden;text-overflow:ellipsis}.vue-component.model-builder .block .editDescription{padding:.3em .2em;box-sizing:border-box;font-size:.9em;line-height:1em;overflow:auto;border:0;border-top:1px dotted #ccc;background-color:#0000;width:100%;max-width:100%;height:3.7em;min-height:2.5em;resize:none}.vue-component.model-builder .block .editDescription:focus{outline:0}.vue-component.model-builder .block_collection{border:2px solid #6b8daf}.vue-component.model-builder .block_collection .blockTitle{background-color:#a3b7cc}.vue-component.model-builder .block_collection .field_id{display:none}.vue-component.model-builder .block_result{border:2px solid #888}.vue-component.model-builder .block_result .field_output .circle{background-color:#888;cursor:auto}.vue-component.model-builder .block_argument{border:2px solid #b28c6b}.vue-component.model-builder .block_argument .blockTitle{background-color:#ccb7a3}.vue-component.model-builder .block_selected{border:2px solid #0a0!important}.vue-component.model-builder .block_selected .blockTitle{background-color:#0c0!important}.vue-component.model-builder .block_invalid{border:2px solid red!important}`, ""]);
// Exports
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);


/***/ }

}]);
//# sourceMappingURL=openeo.3539.js.map